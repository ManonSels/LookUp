{% extends "layout.html" %}

{% block title %}{{ 'Edit' if item else 'New' }} Item - Admin{% endblock %}

{% block content %}
<div class="admin-header">
    <h1>{{ 'Edit' if item else 'Add New' }} Item</h1>
    <div>
        <a href="{{ url_for('admin.manage_sections', topic_id=section.topic_id) }}" class="btn btn-secondary">
            ‚Üê Back to Sections
        </a>
    </div>
</div>

<div class="item-form-container">
    <form method="POST" class="item-form">
        <div class="form-group">
            <label for="title">Item Title *</label>
            <input type="text" id="title" name="title" value="{{ item.title if item }}" required>
            <small>The main title for this reference item</small>
        </div>
        
        <div class="form-group">
            <label for="markdown_content">Content (Markdown)</label>
            <textarea id="markdown_content" name="markdown_content" rows="15" placeholder="Write your content using Markdown syntax...">{{ item.markdown_content if item }}</textarea>
            <small>
                Supports: <strong>**bold**</strong>, <em>*italic*</em>, 
                <code>`code`</code>, ```code blocks```, [links](url), lists, and more.
                <a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Markdown Guide</a>
            </small>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                {{ 'Update' if item else 'Create' }} Item
            </button>
            <a href="{{ url_for('admin.manage_sections', topic_id=section.topic_id) }}" class="btn btn-secondary">
                Cancel
            </a>
            
            {% if item %}
            <a href="{{ url_for('admin.delete_item', item_id=item.id) }}" 
               class="btn btn-danger" 
               onclick="return confirm('Are you sure you want to delete this item?')">
                Delete Item
            </a>
            {% endif %}
        </div>
    </form>
</div>
{% endblock %}